apiVersion: v1
kind: ConfigMap
metadata:
  name: blocky-config
  namespace: network  # Ensure this matches the target namespace of your application
data:
  config.yaml: |
    ports:
      dns: 0.0.0.0:53
      http: 0.0.0.0:4000

    bootstrapDns:
      - tcp-tls:1.1.1.1:853
      - tcp-tls:1.0.0.1:853

    upstreams:
      groups:
        default:
          - tcp-tls:1.1.1.1:853
          - tcp-tls:1.0.0.1:853

    clientLookup:
      upstream: &router 10.0.0.1

    connectIPVersion: v4

    caching:
      minTime: 15m
      prefetching: true
      cacheTimeNegative: -1

    ecs:
      useAsClient: true

    prometheus:
      enable: true
      path: /metrics

    blocking:
      loading:
        downloads:
          timeout: 60s
      blackLists:
        ads:
          - https://big.oisd.nl/domainswild
          - |
            *.androidtvchannels-pa.googleapis.com
            *.androidtvwatsonfe-pa.googleapis.com
      whiteLists:
        ads:
          - |
            *.amazonaws.com
      clientGroupsBlock:
        default:
          - ads
